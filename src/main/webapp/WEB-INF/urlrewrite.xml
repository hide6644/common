<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
     "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">

<urlrewrite default-match-type="wildcard">
    <rule>
        <from>/</from>
        <to type="redirect" last="true">top</to>
    </rule>
    <rule>
        <from>/app/**</from>
        <to type="redirect" last="true">%{context-path}/$1</to>
    </rule>
    <rule>
        <from>/j_security_check</from>
        <to last="true">/j_security_check</to>
    </rule>
    <rule>
        <from>/logout*</from>
        <to last="true">/logout</to>
    </rule>
    <rule>
        <from>/assets/**</from>
        <to last="true">/assets/$1</to>
    </rule>
    <rule>
        <from>/images/**</from>
        <to last="true">/images/$1</to>
    </rule>
    <rule>
        <from>/includes/**</from>
        <to last="true">/includes/$1</to>
    </rule>
    <rule>
        <from>/scripts/**</from>
        <to last="true">/scripts/$1</to>
    </rule>
    <rule>
        <from>/styles/**</from>
        <to last="true">/styles/$1</to>
    </rule>
    <rule>
        <from>/favicon.ico</from>
        <to last="true">/favicon.ico</to>
    </rule>
    <rule>
        <from>/**</from>
        <to last="true">/app/$1</to>
    </rule>

    <outbound-rule>
        <from>/app/**</from>
        <to>/$1</to>
    </outbound-rule>
    <outbound-rule encodefirst="true" match-type="regex">
        <name>Strip URL Session ID's</name>
        <from>^(.*?)(?:\;jsessionid=[^\?#]*)?(\?[^#]*)?(#.*)?$</from>
        <to>$1$2$3</to>
    </outbound-rule>
</urlrewrite>
